# devbase

Development base environment stack using Docker containers. Using Traefik with TLS, Dnsmasq, Exim4 and MailHog.

I have confirmed that it works with Colima on macOS and WSL2 on Windows 10.
It will probably work on Linux as well.

## Key feutures

- The combination of Traefik and Dnsmasq allows switching the access container by hostname instead of port number.
- You can use MailHog to receive even dummy email addresses.
- By using Exim4, only specific domains can be forwarded to regular SMTP.
- Create a self certification authority and a self certificate with openssl to enable https access.

The software used is as follows:

```mermaid
classDiagram

class Docker {
    - Use as a Container Environment
    - The application is basically launched as a container
    - Install docker compose
    - on Colima or WSL2()
}

OpenSSL ..> Traefik : SSL certificate

Traefik --> Dnsmasq : Port 53
Traefik --> Exim : Port 587
Traefik --> MailHog : Port 25
Traefik --> OtherServices : Port 443

Exim --> MailHog : Relay if unknown address

class OpenSSL {
    - Create a self certificate as a self SSL Certificate Authority
    - on Docker(one shot command)
}
class Traefik {
    - Use as reverse proxy
    - Use as TLS termination
    - Network is host mode
    - on Docker(service)
}
class Dnsmasq {
    - Use as local DNS
    - Use for hostname resolution for Traefik
    - on Docker(service)
}
class Exim {
    - Use as SMTP relay
    - Only specific email domain are relayed to regular SMTP
    - Unregistered email domain are relayed to MailHog
    - on Docker(service)
}
class MailHog {
    - Use as Fake SMTP
    - Use as dummy mailbox
    - on Docker(service)
}
class OtherServices {
    - Access with hostname oreore.dev.test
    - on Docker(service)
}
```

> **_NOTE:_** Sorry, my native language is Japanese.

## Install

1. clone this repositoy and copy sample.env to .env. (run on WSL2 if Windows)

   ```sh
   git clone https://github.com/arkbig/devbase.git
   cd devbase
   cp sample.env .env
   ```

2. edit .env.

   - <details><summary>üçé for Mac</summary>

     1. CONTAINER_UID / CONTAINER_GID

        ```sh
        sed -i "" "s/^CONTAINER_UID=.*/CONTAINER_UID=$(id -u)/" .env
        sed -i "" "s/^CONTAINER_GID=.*/CONTAINER_GID=$(id -g)/" .env
        ```

     2. DNSMASQ_ADDR / DNSMASQ_SERVER

        ```sh
        # change to your ethernet.
        use_eth=en0
        sed -i "" "s/^DNSMASQ_ADDR=.*/DNSMASQ_ADDR=`ifconfig "${use_eth}" |grep 'inet '|awk 'END {print $2}'`/" .env
        # bat DNSMASQ_SERVER unuse on Mac.
        sed -i "" -r "s/^#? ?DNSMASQ_SERVER=.*/DNSMASQ_SERVER=`cat /etc/resolv.conf|grep '^nameserver '|awk 'NR==1 {print $2}'`/" .env
        ```

     3. EXIM4_RELAY_DOMAIN / EXIM4_RELAY_ADDR
        This is used to forward mail received by Exim4 to `EXIM4_RELAY_ADDR` if the recipient is `EXIM4_RELAY_DOMAIN`.
        set if you want.
        It is also possible to specify multiple composites with sequential numbers such as \*\_1,\*\_2 in compose.override.yaml.

     4. COMPOSE_PROFILES
        If your environment does not support UDP tunneling (like Colima), enable udptunnel.

     </details>

   - <details><summary>ü™ü for Windows(WSL2)</summary>

     1. CONTAINER_UID / CONTAINER_GID

        ```sh
        sed -i "s/^CONTAINER_UID=.*/CONTAINER_UID=$(id -u)/" .env
        sed -i "s/^CONTAINER_GID=.*/CONTAINER_GID=$(id -g)/" .env
        ```

     2. DNSMASQ_ADDR / DNSMASQ_SERVER
        DNSMASQ_ADDR is the fixed IP address to be given to WSL2 after this, but if you do not change it, the default `192.168.100.100` is ok.
        I could not find a good one-liner to rewrite DNSMASQ_SERVER, so I will set it manually.Check the DNS server from the adapter you use in Windows "Network Connections".It is usually the same as the Default Gateway shown by "ipconfig" at the command prompt.

     3. EXIM4_RELAY_DOMAIN / EXIM4_RELAY_ADDR
        This is used to forward mail received by Exim4 to `EXIM4_RELAY_ADDR` if the recipient is `EXIM4_RELAY_DOMAIN`.
        set if you want.
        It is also possible to specify multiple composites with sequential numbers such as \*\_1,\*\_2 in compose.override.yaml.

     </details>

   - <details><summary>üêß for Ubuntu</summary>

     1. CONTAINER_UID / CONTAINER_GID

        ```sh
        sed -i "s/^CONTAINER_UID=.*/CONTAINER_UID=$(id -u)/" .env
        sed -i "s/^CONTAINER_GID=.*/CONTAINER_GID=$(id -g)/" .env
        ```

     2. DNSMASQ_ADDR / DNSMASQ_SERVER

        ```sh
        # change to your ethernet.
        use_eth=eth0
        sed -i "s/^DNSMASQ_ADDR=.*/DNSMASQ_ADDR=`ip a show ${use_eth}|grep 'inet '|awk 'END {print $2}'|awk -F '/' '{print $1}'`/" .env
        # or set manually.
        sed -i "" -r "s/^#? ?DNSMASQ_SERVER=.*/DNSMASQ_SERVER=`cat /etc/resolv.conf|grep '^nameserver '|awk 'END {print $2}'`/" .env
        ```

     3. EXIM4_RELAY_DOMAIN / EXIM4_RELAY_ADDR
        This is used to forward mail received by Exim4 to `EXIM4_RELAY_ADDR` if the recipient is `EXIM4_RELAY_DOMAIN`.
        set if you want.
        It is also possible to specify multiple composites with sequential numbers such as \*\_1,\*\_2 in compose.override.yaml.

     </details>

3. create certificates.

   ```sh
   mkdir sslcert/.certs
   docker compose build sslcert
   docker compose run --rm sslcert
   ```

4. register sslcert/.certs/ca-My-Test.cer to the OS

   - <details><summary>üçé for Mac</summary>

     - To Keychain Access. (Open the .cer file in the finder.)

     </details>

   - <details><summary>ü™ü for Windows(WSL2)</summary>

     - To MMC. (Open the .cer file in the explorer.)
       - Certificate store is "Trusted Root Certification Authorities".
     - Also installed in WSL2 (see Ubuntu)

     </details>

   - <details><summary>üêß for Ubuntu</summary>

     - copy & add

       ```sh
       sudo mkdir /usr/share/ca-certificates/self
       sudo cp ./sslcert/.certs/ca-My-Test.cer /usr/share/ca-certificates/self/
       sudo echo "self/ca-My-Test.cer" >> /etc/ca-certificates.conf
       sudo update-ca-certificates
       ```

     </details>

5. run compose.

   ```sh
   docker compose up -d
   ```

   - Although an image is specified, it does not exist, so a pull will result in an error and build will run.

6. DNS related settings

   - <details><summary>üçé for Mac</summary>

     - ‚ùì Check command is `sudo lsof -i:53`. If TCP is present but UDP is not, as shown below, this is not supported UDP port forwarding.

       ```sh
       COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
       ssh       732  big   41u  IPv4 0xbeaf      0t0  TCP *:domain (LISTEN)
       üÜñ UDP is missing. So run udptunnel.
       ```

     - Run udptunnel using socat. If UDP was supported, skip this next is add to resolver.

       - for host

         ```sh
         sudo brew install socat
         udptunnel/forward_udp.sh udptunnel/udp_forwarding.conf &
         # If you want to stop, run the following command
         # udptunnel/forward_udp.sh udptunnel/udp_forwarding.conf kill
         ```

       - for container

         ```sh
         COMPOSE_PROFILES=udptunnel docker compose up -d --build
         ```

         Also, you can add `COMPOSE_PROFILES=udptunnel` to `.env`

     - Add to resolver for dnsmasq

       ```sh
       sudo mkdir /etc/resolver
       # "test" is the domain name to be used.
       vi /etc/resolver/test
       ```

       - `/etc/resolver/test` contents.

         ```ini
         options timeout:1
         options attempts:2
         options use-vc
         nameserver 127.0.0.1
         ```

     </details>

   - <details><summary>ü™ü for Windows(WSL2)</summary>

     1. set and run wsl2/wsl_startup.bat as administrator on host Windows.
        If necessary, copy wsl_env.bat to .wsl_env.bat to set variables.
        wsl_startup.bat does the following by default:

        - set static ip address to WSL. (IMPORTANT here)
        - start dockerd
        - start sshd
        - port forwarding for ssh

        register wsl_startup_helper.bat in task scheduler to run as administrator at startup.
        copy these like `cp wsl2/wsl_startup_helper.bat to /mnt/c/Users/$USER/` first.
        and wsl_startup_helper.bat's arg is path to wsl_startup.bat like "\\\\wsl$\\Ubuntu-20.04\\Home\\user\\devbase\\wsl2\wsl_startup.bat"

     2. ‚ùì check command is `ping 192.168.100.100`.(This is the DNSMASQ_ADDR.) both Win and WSL.
     3. Change adapter settings.
        Set "Use the following DNS server addresses:"

        - Preferred DNS server: 192.168.100.100 (This is the DNSMASQ_ADDR.)
        - Alternate DNS server: 1.1.1.1 (This is your real DNS.)

     4. For WSL2(in WSL2)

        create `/etc/wsl.conf` (sudo vi /etc/wsl.conf)

        ```ini
        [network]
        generateResolvConf = false
        ```

        ```sh
        sudo cp /etc/resolv.conf /etc/resolv.conf.bak
        sudo rm /etc/resolv.conf
        sudo mv /etc/resolv.conf.bak /etc/resolv.conf
        vi /etc/resolv.conf
        ```

        ```ini
        options timeout:1
        options attempts:2
        nameserver 127.0.0.1
        # This is your real DNS ($DNSMASQ_SERVER in .env)
        nameserver 1.1.1.1
        ```

     </details>

   - <details><summary>üêß for Ubuntu</summary>

     - Add to /etc/resolv.conf

       ```ini
       options timeout:1
       options attempts:2
       nameserver 127.0.0.1
       # This is your real DNS ($DNSMASQ_SERVER in .env)
       nameserver 1.1.1.1
       ```

     </details>

7. ‚ùì check.
   - Access <https://traefik.dev.test>
   - If you see the Traefik dashboard, success!üéâ

## Customize

### Popular settings

`compose.override.yaml`„Å´DNSMASQ_ADDR„ÇíË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ
IP„Ç¢„Éâ„É¨„Çπ„ÅÆÈÉ®ÂàÜ„ÅØËá™ÂàÜ„ÅÆ„Éû„Ç∑„É≥„ÅÆ„ÇÇ„ÅÆ„Å´ÁΩÆ„ÅçÊèõ„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
127.0.0.1„Å†„Å®„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ\*.dev.test„Å´„Ç¢„ÇØ„Çª„Çπ„Åó„ÅüÂ†¥Âêà„ÄÅ„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„ÇíÊåá„Åô„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ
„Åì„ÅÆ„Çà„ÅÜ„Å´„Éõ„Çπ„Éà„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÇíÊåáÂÆö„Åô„Çå„Å∞„ÄÅ„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ„ÇÇ„Éõ„Çπ„Éà„Éû„Ç∑„É≥„Å∏„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

```yaml
services:
  dnsmasq:
    environment:
      DNSMASQ_ADDR: 10.0.0.1
```

### Self CA / Self signed certificates

compose.override.yaml„ÅÆsslcert„Çµ„Éº„Éì„Çπ„Å´environments„ÇíÊåáÂÆö„Åô„Çã„Å®Â§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ
‰∏ãË®ò„Åå„Éá„Éï„Ç©„É´„ÉàÂÄ§„Åß„ÅÆË®≠ÂÆö‰æã„Åß„Åô„ÄÇ

```yaml
sslcert:
  environment:
    # ‰ΩúÊàê„Åï„Çå„ÇãË®ºÊòéÊõ∏„Åü„Å°„ÅÆowner„ÇíÊåáÂÆö
    CONTAINER_UID: 501
    CONTAINER_GID: 20
    # Âá∫ÂäõÂÖà„Éï„Ç©„É´„ÉÄ(„Ç≥„É≥„ÉÜ„ÉäÂÜÖ„Éë„Çπ)
    CERTS_OUT: /certs
    # Ëá™Â∑±Ë™çË®ºÂ±Ä„ÅÆË®≠ÂÆö
    ## ÂêçÁß∞
    CA_CN: My Test
    ## ÁîüÊàê„Åô„Çã„Éï„Ç°„Ç§„É´„ÅÆbasename
    CA_FILEBODY: <normalized CA_CN>
    ## OS„Å´ÁôªÈå≤„Åô„ÇãË™çË®ºÂ±Ä„ÅÆË®ºÊòéÊõ∏„Éï„Ç°„Ç§„É´Âêç
    CA_CERT: $CA_FILEBODY.cer
    ## Ë®ºÊòéÊõ∏Áô∫Ë°åÊôÇ„Å´‰ΩøÁî®„Åô„ÇãË®ºÊòéÊõ∏„ÅÆÁßòÂØÜÈçµ
    CA_KEY: $CA_FILEBODY.key
    ## ÁßòÂØÜÈçµ„ÅÆ‰øùÂ≠òÊôÇ„ÅÆÊöóÂè∑„Éë„Çπ„ÉØ„Éº„ÉâÔºàÁ©∫ÊñáÂ≠ó„Å™„ÇâÂπ≥Êñá‰øùÂ≠òÔºâ
    CA_PASS: $CA_FILEBODY.pass
    ## Ë™çË®ºÂ±Ä„ÅÆÂ±ûÊÄß
    ## /C=ÂõΩ„Ç≥„Éº„Éâ/ST=Áúå/O=ÁµÑÁπîÂêç/OU=ÈÉ®ÈñÄ„Å™„Å©„ÅåÊåáÂÆö„Åß„Åç„Çã
    ## /CN=„ÅåÊú™ÊåáÂÆö„Å™„ÇâËá™Âãï„Åß/CN=$CA_CN„Åå‰ªò‰∏é„Åï„Çå„Çã
    CA_SUBJ: /CN=$CA_CN
    # Ëá™Â∑±Ë®ºÊòéÊõ∏„ÅÆË®≠ÂÆö
    ## ÂêçÁß∞ÔºàÂè§„ÅÑ„Ç∑„Çπ„ÉÜ„É†Áî®„ÅÆ„Éâ„É°„Ç§„É≥Ôºâ
    SSL_CN: dev.test
    ## Êñ∞„Åó„ÅÑ„Ç∑„Çπ„ÉÜ„É†Áî®„ÅÆSAN„Å™„Å©
    SSL_ADDEXT: subjectAltName=DNS:test,DNS,dev.test,DNS:*.dev.test,DNS:localhost,DNS:dev.localhost,DNS:*.dev.localhost,IP:127.0.0.1
    ## ÁîüÊàê„Åô„Çã„Éï„Ç°„Ç§„É´„ÅÆbasename
    SSL_FILEBODY: <normalized SSL_CN>
    ## „Çµ„Éº„Éê„Éº„Å´Ë®≠ÂÆö„Åô„ÇãËá™Â∑±Ë®ºÊòéÊõ∏ÔºàÂÖ¨ÈñãÈçµÔºâ
    SSL_CERT: $SSL_FILEBODY.cer
    ## „Çµ„Éº„Éê„Éº„Å´Ë®≠ÂÆö„Åô„ÇãËá™Â∑±Ë®ºÊòéÊõ∏„ÅÆÁßòÂØÜÈçµ
    SSL_KEY: $SSL_FILEBODY.key
    ## Ë™çË®ºÂ±Ä„Å∏„ÅÆÁΩ≤Âêç„É™„ÇØ„Ç®„Çπ„Éà„Éï„Ç°„Ç§„É´ÔºàÊâãÊäú„Åç„Å™„ÅÆ„ÅßÊú¨Áï™„Å´„ÅØ‰Ωø„Åà„Å™„ÅÑÔºâ
    SSL_CSR: $SSL_FILEBODY.csr
    ## Ëá™Â∑±Ë®ºÊòéÊõ∏„ÅÆ‰øùÂ≠òÊôÇ„ÅÆÊöóÂè∑„Éë„Çπ„ÉØ„Éº„ÉâÔºàÁ©∫ÊñáÂ≠ó„Å™„ÇâÂπ≥Êñá‰øùÂ≠òÔºâ
    SSL_PASS: ""
    ## Ëá™Â∑±Ë®ºÊòéÊõ∏„ÅÆ„Ç∑„É™„Ç¢„É´Áï™Âè∑‰øùÂ≠ò„Éï„Ç°„Ç§„É´
    SSL_SERIAL: $SSL_FILEBODY.srl
    ## Ëá™Â∑±Ë®ºÊòéÊõ∏„ÅÆÂ±ûÊÄß
    ## /C=ÂõΩ„Ç≥„Éº„Éâ/ST=Áúå/O=ÁµÑÁπîÂêç/OU=ÈÉ®ÈñÄ„Å™„Å©„ÅåÊåáÂÆö„Åß„Åç„Çã
    ## /CN=„ÅåÊú™ÊåáÂÆö„Å™„ÇâËá™Âãï„Åß/CN=$SSL_CN„Åå‰ªò‰∏é„Åï„Çå„Çã
    SSL_SUBL: /CN=$SSL_CN
```

### Dnsmasq

compose.override.yaml„ÅÆdnsmasq„Çµ„Éº„Éì„Çπ„Å´environment„ÇíÊåáÂÆö„Åô„Çã„Å®Â§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ
‰∏ãË®ò„Åå„Éá„Éï„Ç©„É´„ÉàÂÄ§„Åß„ÅÆË®≠ÂÆö‰æã„Åß„Åô„ÄÇ

ÈÄöÂ∏∏„ÅØ`DNSMASQ_ADDR`„ÇíÊåáÂÆö„Åó„Åæ„Åô„ÄÇ
Âõ∫ÂÆöIP„Å™„Çâ„Éõ„Çπ„Éà„Éû„Ç∑„É≥„ÅÆIP„Ç¢„Éâ„É¨„Çπ„ÄÅ„Åù„ÅÜ„Åß„Å™„Åë„Çå„Å∞„É´„Éº„Éó„Éê„ÉÉ„ÇØ„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„Çí‰ΩúÊàê„Åó„Å¶„Åù„Çå„ÇíÊåáÂÆö„Åô„Çã„Åì„Å®„Å´„Å™„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ

DNSMASQ*DOMAIN„Å´ÊåáÂÆö„Åó„ÅüÂÄ§„Å´„Çà„Å£„Å¶„ÄÅOS„ÅÆresolver„Å´ÁôªÈå≤„Åô„Çã„Éâ„É°„Ç§„É≥„ÇÇÂ§â„Çè„Çä„Åæ„Åô„ÄÇ
DNSMASQ*{DOMAIN,ADDR}\_1„Å®„ÅãËøΩÂä†„ÅßÊåáÂÆö„Åó„Åü„Å®„Åç„ÇÇ„ÄÅOS„ÅÆresolver„Å´ËøΩÂä†ÁôªÈå≤„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ

```yaml
dnsmasq:
  environment:
    # Dnsmasq„ÅÆËµ∑ÂãïÂºïÊï∞
    # „Åì„ÅÆ‰ªñ„Å´ -A "/$DNSMASQ_DOMAIN/DNSMASK_ADDR -A ...„Åå‰ªò‰∏é„Åï„Çå„Çã
    DNSMASQ_ARGS: -h -k -n -R -u root -8 -
    # „É°„Ç§„É≥„ÅÆÂ§âÊèõ„Éâ„É°„Ç§„É≥
    DNSMASQ_DOMAIN: .test
    # „É°„Ç§„É≥„ÅÆÂ§âÊèõIP„Ç¢„Éâ„É¨„Çπ(„Ç≥„É≥„ÉÜ„Éä„Åã„Çâ‰ΩøÁî®„Åô„Çã„Åü„ÇÅ„ÄÅ„Éõ„Çπ„ÉàIP„Ç¢„Éâ„É¨„Çπ„Å´„Åô„Åπ„Åç)
    DNSMASQ_ADDR: 192.168.100.100
    # ‰ª•Èôç„ÇÇÈÄ£Áï™„ÅßÊåáÂÆöÂèØËÉΩ
    # Á©∫ÊñáÂ≠ó„Çå„Å§„ÇÇ„Åó„Åè„ÅØÊú™ÂÆöÁæ©„Å´ÈÅ≠ÈÅá„Åô„Çã„Å®„Åù„Åì„ÅßÁµÇ‰∫Ü
    # "-"„Éè„Ç§„Éï„É≥„Å†„Åë„Å™„Çâ„Åù„ÅÆÁï™Âè∑„ÅØ„Çπ„Ç≠„ÉÉ„Éó„Åó„Å¶„ÄÅÊ¨°„ÅÆÁï™Âè∑„ÇíÂá¶ÁêÜ
    DNSMASQ_DOMAIN_1:
    DNSMASQ_ADDR_1:
    # ÈÄöÂ∏∏‰Ωø„ÅÜDNS„Çµ„Éº„Éê„Éº
    DNSMASQ_SERVER: 1.1.1.1
    # ‰ª•Èôç„ÇÇÈÄ£Áï™„ÅßÊåáÂÆöÂèØËÉΩ
    # Á©∫ÊñáÂ≠ó„Çå„Å§„ÇÇ„Åó„Åè„ÅØÊú™ÂÆöÁæ©„Å´ÈÅ≠ÈÅá„Åô„Çã„Å®„Åù„Åì„ÅßÁµÇ‰∫Ü
    # "-"„Éè„Ç§„Éï„É≥„Å†„Åë„Å™„Çâ„Åù„ÅÆÁï™Âè∑„ÅØ„Çπ„Ç≠„ÉÉ„Éó„Åó„Å¶„ÄÅÊ¨°„ÅÆÁï™Âè∑„ÇíÂá¶ÁêÜ
    DNSMASQ_SERVER_1:
```

## udptunnel

compose.override.yaml„ÅÆudptunnel„Çµ„Éº„Éì„Çπ„Å´environment„ÇíÊåáÂÆö„Åô„Çã„Å®Â§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ
‰∏ãË®ò„Åå„Éá„Éï„Ç©„É´„ÉàÂÄ§„Åß„ÅÆË®≠ÂÆö‰æã„Åß„Åô„ÄÇ

```yaml
udptunnel:
  environment:
    # „Ç≥„É≥„ÉÜ„ÉäÂÜÖ„Åß„Ç≥„Éû„É≥„ÉâÂÆüË°å„Åô„Çãowner„ÇíÊåáÂÆö
    CONTAINER_UID: 501
    CONTAINER_GID: 20
```

„Åæ„Åü„ÄÅudp_forwarding.conf„ÇíÂ§âÊõ¥„Åô„Çã„Å®Âà•„ÅÆ„Éù„Éº„ÉàÁï™Âè∑„ÇÇ„Éà„É≥„Éç„É´„Åß„Åç„Åæ„Åô„ÄÇ

## MailHog

Áâπ„Å´„Å™„Åó„ÄÇ[ÂÖ¨Âºè„ÅÆ„Ç≥„É≥„ÉÜ„Éä](https://hub.docker.com/r/mailhog/mailhog/)„Çí‰Ωø„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

## Exim4

compose.override.yaml„ÅÆexim4„Çµ„Éº„Éì„Çπ„Å´environment„ÇíÊåáÂÆö„Åô„Çã„Å®Â§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ
‰∏ãË®ò„Åå„Éá„Éï„Ç©„É´„ÉàÂÄ§„Åß„ÅÆË®≠ÂÆö‰æã„Åß„Åô„ÄÇ

Á§æÂÜÖÁî®„Å™„Çâ`EXIM4_RELAY_DOMAIN`„Å´Ëá™Á§æ„ÅÆ„Éâ„É°„Ç§„É≥Âêç„ÄÅ`EXIM4_RELAY_ADDR`„Å´Ëá™Á§æ„ÅÆSMTP„Çµ„Éº„Éê„Éº„Çí„Åù„Çå„Åû„ÇåÊåáÂÆö„Åô„Çã„Åì„Å®„Å´„Å™„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ
„Åì„Çå„Åß„ÄÅÂÆõÂÖà„ÇíÈñìÈÅï„Åà„Å¶Á§æÂ§ñ„Å´ÊÉÖÂ†±„ÅåÊµÅÂá∫„Åô„Çã„ÅÆ„ÇíÈò≤„Åí„Åæ„Åô„ÄÇ

```yaml
exim4:
  environment:
    # ÈÄöÂ∏∏„ÅÆ„É°„Éº„É´Ëª¢ÈÄÅÂÖà(„Éù„Éº„ÉàÁï™Âè∑ÊåáÂÆö„Åô„ÇãÂ†¥Âêà"::"„Ç≥„É≠„É≥„ÅåÔºí„Å§„Å™„ÅÆ„ÅßÊ≥®ÊÑè)
    EXIM4_SMARTHOST: mailhog::1025
    # ÂÆõÂÖà„Éâ„É°„Ç§„É≥„ÅåÊåáÂÆö„Åó„Åü„ÇÇ„ÅÆ„Å†„Å£„Åü„Çâ„ÄÅÂ∞ÇÁî®„ÅÆËª¢ÈÄÅÂÖà„Å´ÈÄÅ„Çã
    EXIM4_RELAY_DOMAIN:
    # Â∞ÇÁî®„ÅÆËª¢ÈÄÅÂÖà(„Åì„Çå„ÇÇ„Éù„Éº„ÉàÁï™Âè∑ÊåáÂÆö„Åô„ÇãÂ†¥Âêà"::"„Ç≥„É≠„É≥„ÅåÔºí„Å§„Å™„ÅÆ„ÅßÊ≥®ÊÑè)
    EXIM4_RELAY_ADDR:
    # ËøΩÂä†„ÅÆÂ§âÊõ¥„Éâ„É°„Ç§„É≥
    EXIM4_RELAY_DOMAIN_1:
    # ËøΩÂä†„ÅÆÂ§âÊõ¥IP„Ç¢„Éâ„É¨„Çπ
    EXIM4_RELAY_ADDR_1:
    # ‰ª•Èôç„ÇÇÈÄ£Áï™„ÅßÊåáÂÆöÂèØËÉΩ
    # Á©∫ÊñáÂ≠ó„Çå„Å§„ÇÇ„Åó„Åè„ÅØÊú™ÂÆöÁæ©„Å´ÈÅ≠ÈÅá„Åô„Çã„Å®„Åù„Åì„ÅßÁµÇ‰∫Ü
    # "-"„Éè„Ç§„Éï„É≥„Å†„Åë„Å™„Çâ„Åù„ÅÆÁï™Âè∑„ÅØ„Çπ„Ç≠„ÉÉ„Éó„Åó„Å¶„ÄÅÊ¨°„ÅÆÁï™Âè∑„ÇíÂá¶ÁêÜ
```

## License

This repository's license is [MIT](./LICENSE).

Also using the following OSS:

| Software                                              | License                 |
| ----------------------------------------------------- | ----------------------- |
| [Dnsmasq](https://thekelleys.org.uk/dnsmasq/doc.html) | License: GPL, version 3 |
| [Exim](https://www.exim.org)                          | License: GPL, version 3 |
| [MailHog](https://github.com/mailhog/MailHog)         | License: MIT            |
| [OpenSSL](https://www.openssl.org)                    | License: OpenSSL        |
| [Socat](http://www.dest-unreach.org/socat/)           | License: GPL, version 2 |
| [Traefik](https://github.com/traefik/traefik)         | License: MIT            |
